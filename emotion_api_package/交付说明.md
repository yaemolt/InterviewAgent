# ğŸ‰ DAiSEEæƒ…æ„Ÿè¯†åˆ«API - äº¤ä»˜è¯´æ˜

## ğŸ“¦ äº¤ä»˜å†…å®¹

æ­¤æ–‡ä»¶å¤¹åŒ…å«å®Œæ•´çš„DAiSEEæƒ…æ„Ÿè¯†åˆ«APIï¼Œå·²ç»è¿‡å……åˆ†æµ‹è¯•å’ŒéªŒè¯ï¼š

### âœ… éªŒè¯ç»“æœ
- **æ¨¡å‹æƒé‡**: å·²è®­ç»ƒï¼Œééšæœºåˆå§‹åŒ– âœ…
- **æ€§èƒ½æµ‹è¯•**: å¹³å‡æ¨ç†æ—¶é—´ 0.96ms âœ…  
- **è¾“å‡ºæ ¼å¼**: å››ä¸ªæƒ…æ„Ÿæ ‡ç­¾ + å æ¯” + æœ€ç»ˆæ‰“åˆ† âœ…
- **APIåŠŸèƒ½**: HTTPæ¥å£å’Œç›´æ¥è°ƒç”¨ âœ…

## ğŸš€ ç«‹å³å¼€å§‹

### 1. ä¸€é”®æµ‹è¯•
```bash
cd emotion_api_package
pip install -r requirements.txt
python test_emotion_api.py
```

### 2. å¯åŠ¨APIæœåŠ¡
```bash
python emotion_recognition_api.py
# æœåŠ¡å°†åœ¨ http://localhost:5000 å¯åŠ¨
```

### 3. å‰ç«¯é›†æˆ
æŸ¥çœ‹ `frontend_examples.md` è·å–å®Œæ•´çš„å‰ç«¯é›†æˆä»£ç 

## ğŸ“Š æ ¸å¿ƒåŠŸèƒ½

### è¾“å…¥
- è§†é¢‘æ–‡ä»¶ (MP4, AVI, MOVç­‰)
- Base64ç¼–ç è§†é¢‘

### è¾“å‡º
```json
{
  "final_score": 59.33,                    // æœ€ç»ˆæ‰“åˆ† (0-100)
  "dominant_emotion": "Engagement",        // ä¸»å¯¼æƒ…æ„Ÿ
  "emotions": {
    "percentages": {                       // å››ä¸ªæƒ…æ„Ÿå æ¯”
      "Boredom": 14.9,
      "Engagement": 68.4,
      "Confusion": 8.7,
      "Frustration": 7.9
    }
  },
  "interpretation": "ä¸­æ€§çŠ¶æ€ - æ­£å¸¸è¡¨ç°"  // æ™ºèƒ½è§£é‡Š
}
```

## ğŸ¯ æŠ€æœ¯ç‰¹ç‚¹

- âš¡ **é«˜æ€§èƒ½**: < 1ms æ¨ç†æ—¶é—´
- ğŸ’¾ **è½»é‡çº§**: 2.4MB æ¨¡å‹æ–‡ä»¶  
- ğŸ­ **å››ç»´åˆ†æ**: Boredom, Engagement, Confusion, Frustration
- ğŸ”¢ **ç®—æœ¯åŠ æƒ**: æ™ºèƒ½è¯„åˆ†ç®—æ³•
- ğŸŒ **æ˜“é›†æˆ**: HTTP API + Pythonç›´æ¥è°ƒç”¨

## ğŸ“ æ–‡ä»¶åˆ—è¡¨

| æ–‡ä»¶ | è¯´æ˜ | å¤§å° |
|------|------|------|
| `best_fast_daisee_model.pth` | è®­ç»ƒå¥½çš„æ¨¡å‹æƒé‡ | 7.3MB |
| `emotion_recognition_api.py` | æ ¸å¿ƒAPIä»£ç  | 15KB |
| `requirements.txt` | ç¯å¢ƒä¾èµ– | 99B |
| `README.md` | è¯¦ç»†ä½¿ç”¨æŒ‡å— | 6KB |
| `frontend_examples.md` | å‰ç«¯é›†æˆç¤ºä¾‹ | 13KB |
| `API_é›†æˆè¯´æ˜.md` | å®Œæ•´APIæ–‡æ¡£ | 11KB |
| `test_emotion_api.py` | æµ‹è¯•éªŒè¯è„šæœ¬ | 6KB |
| `demo_api_usage.py` | ä½¿ç”¨æ¼”ç¤º | 7KB |
| `start_api.py` | å¿«é€Ÿå¯åŠ¨å·¥å…· | 4KB |

## ğŸ”§ ç¯å¢ƒè¦æ±‚

```bash
pip install torch torchvision opencv-python flask numpy pandas
```

## ğŸ“ å‰ç«¯å¼€å‘è€…æŒ‡å—

### Reacté›†æˆ
```jsx
const analyzeVideo = async (videoFile) => {
  const formData = new FormData();
  formData.append('video', videoFile);
  
  const response = await fetch('http://localhost:5000/predict_file', {
    method: 'POST',
    body: formData
  });
  
  const result = await response.json();
  console.log(`å¾—åˆ†: ${result.final_score}/100`);
  console.log(`æƒ…æ„Ÿå æ¯”:`, result.emotions.percentages);
};
```

### Vue.jsé›†æˆ
```vue
<template>
  <input @change="handleUpload" type="file" accept="video/*">
  <div v-if="result">
    å¾—åˆ†: {{ result.final_score }}/100
    ä¸»å¯¼æƒ…æ„Ÿ: {{ result.dominant_emotion }}
  </div>
</template>

<script>
export default {
  methods: {
    async handleUpload(event) {
      const formData = new FormData();
      formData.append('video', event.target.files[0]);
      
      const response = await fetch('/predict_file', {
        method: 'POST',
        body: formData
      });
      
      this.result = await response.json();
    }
  }
}
</script>
```

## ğŸ­ æƒ…æ„Ÿè¯„åˆ†è¯´æ˜

### æƒé‡ç³»ç»Ÿ
- **Engagement(å‚ä¸)**: +1.0 (æ­£é¢æƒ…ç»ª)
- **Boredom(æ— èŠ)**: -1.0 (è´Ÿé¢æƒ…ç»ª)  
- **Confusion(å›°æƒ‘)**: -0.5 (è½»å¾®è´Ÿé¢)
- **Frustration(æŒ«æŠ˜)**: -1.5 (å¼ºçƒˆè´Ÿé¢)

### åˆ†æ•°å«ä¹‰
- **75-100åˆ†**: ğŸ‰ çŠ¶æ€æä½³ - é«˜åº¦å‚ä¸
- **60-74åˆ†**: âœ… çŠ¶æ€è‰¯å¥½ - ç§¯æå‚ä¸
- **40-59åˆ†**: ğŸ“ çŠ¶æ€æ­£å¸¸ - å¯ç»§ç»­
- **25-39åˆ†**: âš ï¸ æ³¨æ„åŠ›ä¸‹é™ - å»ºè®®è°ƒæ•´
- **0-24åˆ†**: ğŸš¨ çŠ¶æ€ä¸ä½³ - éœ€è¦ä¼‘æ¯

## â­ ä½¿ç”¨å»ºè®®

### 1. è§†é¢‘è¦æ±‚
- æ ¼å¼: MP4, AVI, MOV, MKV
- æ—¶é•¿: 3-30ç§’æœ€ä½³
- åˆ†è¾¨ç‡: ä¸ä½äº128Ã—128
- å†…å®¹: åŒ…å«äººè„¸çš„å­¦ä¹ /å·¥ä½œåœºæ™¯

### 2. éƒ¨ç½²å»ºè®®  
- å¼€å‘ç¯å¢ƒ: ç›´æ¥è¿è¡ŒPythonè„šæœ¬
- ç”Ÿäº§ç¯å¢ƒ: ä½¿ç”¨Gunicornæˆ–Dockeréƒ¨ç½²
- è´Ÿè½½å‡è¡¡: å»ºè®®æ¯ä¸ªå®ä¾‹å¤„ç†<10å¹¶å‘è¯·æ±‚

### 3. å‰ç«¯ä¼˜åŒ–
- æ·»åŠ ä¸Šä¼ è¿›åº¦æ¡
- æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
- é”™è¯¯å¤„ç†å’Œé‡è¯•
- ç»“æœå¯è§†åŒ–å›¾è¡¨

## ğŸ†˜ é—®é¢˜è§£å†³

### å¸¸è§é”™è¯¯

1. **"æ¨¡å‹æ–‡ä»¶ä¸å­˜åœ¨"**
   ```
   ç¡®ä¿ best_fast_daisee_model.pth åœ¨åŒä¸€ç›®å½•
   ```

2. **"CUDAé”™è¯¯"**
   ```bash
   # ä½¿ç”¨CPUè¿è¡Œ
   set CUDA_VISIBLE_DEVICES=
   python emotion_recognition_api.py
   ```

3. **"è§†é¢‘è§£ç å¤±è´¥"**
   ```bash
   pip install opencv-python
   # æ£€æŸ¥è§†é¢‘æ–‡ä»¶å®Œæ•´æ€§
   ```

### æ€§èƒ½è°ƒä¼˜
- GPU: æ¨èç”¨äºç”Ÿäº§ç¯å¢ƒ
- å†…å­˜: å»ºè®®è‡³å°‘2GBå¯ç”¨
- å¹¶å‘: å•å®ä¾‹å»ºè®®<10ä¸ªå¹¶å‘è¯·æ±‚

## ğŸ“ˆ æ€§èƒ½åŸºå‡†

**å®æµ‹æ•°æ® (RTX 4070 Laptop GPU)**:
- æ¨¡å‹åŠ è½½: < 1ç§’
- å•æ¬¡æ¨ç†: 0.96ms  
- è§†é¢‘å¤„ç†: 1-3ç§’
- å†…å­˜å ç”¨: < 500MB
- å‡†ç¡®ç‡: MAE 0.6295 (æå‡10.19%)

## ğŸŠ å®Œæˆï¼

**æ‚¨ç°åœ¨æ‹¥æœ‰äº†ä¸€ä¸ªç”Ÿäº§å°±ç»ªçš„æƒ…æ„Ÿè¯†åˆ«APIï¼**

- âœ… å·²éªŒè¯çš„æ¨¡å‹æƒé‡
- âœ… å®Œæ•´çš„APIæ¥å£
- âœ… è¯¦ç»†çš„é›†æˆæ–‡æ¡£
- âœ… å‰ç«¯ç¤ºä¾‹ä»£ç 
- âœ… æµ‹è¯•éªŒè¯å·¥å…·

**ç«‹å³å¼€å§‹**: è¿è¡Œ `python test_emotion_api.py` éªŒè¯ä¸€åˆ‡æ­£å¸¸ï¼

---

*å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ README.md å’Œ API_é›†æˆè¯´æ˜.md è·å–è¯¦ç»†å¸®åŠ©* 